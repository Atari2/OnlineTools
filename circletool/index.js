function t(t){return`$${BigInt.asUintN(8,t).toString(16).toUpperCase().padStart(2,"0")}`}export default function(n){const e=n.byID("file"),r=n.byID("angle"),a=n.byID("generate");a.addEventListener("click",(()=>{const s=e.files[0];if(null==s)return n.setStatus({error:"No file specified."});a.disabled=!0;const i=Number(r.value);s.text().then((e=>{const r=function(n,e){const r=(n=n.replace(/[^\r]\n/g,"\r\n")).indexOf("HorzSineTable:\r\n");if(-1===r)return{error:"Didn't find HorzSineTable: in the ASM file."};e<0&&(e=90-e),e/=90;const a=[],s=[];for(let t=0;t<256;t++)a[t]=BigInt(Math.trunc(256*Math.sin(e*(Math.PI/2)*Math.sin(t*Math.PI/256)))),s[t]=BigInt(Math.trunc(256*Math.cos(e*(Math.PI/2)*Math.sin(t*Math.PI/256))));const i=["HorzSineTable:\r\n"],o=["VertSineTable:\r\n"];for(let n=0;n<32;n++){i.push("db "),o.push("db ");for(let e=0;e<8;e++){e>0&&(i.push(","),o.push(","));const r=BigInt.asUintN(16,a[8*n+e]),l=BigInt.asUintN(16,s[8*n+e]);i.push(t(r),",",t(r/256n)),o.push(t(l),",",t(l/256n))}i.push("\r\n"),o.push("\r\n")}return{asm:n.slice(0,r).concat(i.join("")).concat(o.join(""))}}(e,i);if(n.setStatus(r),null!=r.asm)return n.download(s.name,new Blob([r.asm],{type:"text/x-asm"}))})).catch((t=>{console.log(t),n.setStatus({error:"Internal error."})})).finally((()=>{a.disabled=!1}))}))}